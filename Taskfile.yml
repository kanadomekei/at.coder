version: '3'

tasks:
  new:
    desc: "Create a new contest directory in ./ABC/ using acc."
    dir: ABC
    cmds:
      - acc new {{.CLI_ARGS}}

  test:
    desc: "Test the solution in the current directory using oj."
    dir: '{{.PWD}}'
    cmds:
      - |
        if [ -f main.go ]; then
          oj test -d ../tests -c "go run main.go"
        elif [ -f Cargo.toml ]; then
          oj test -d ../tests -c "cargo run"
        else
          echo "No go or rust files found to test."
          exit 1
        fi

  submit:
    desc: "Submit the solution in the current directory using acc."
    dir: '{{.PWD}}'
    cmds:
      - |
        if [ -f main.go ]; then
          acc submit main.go
        elif [ -f Cargo.toml ]; then
          acc submit
        else
          echo "No go or rust files found to submit."
          exit 1
        fi
